webpackJsonp([2],{C5Lo:function(t,e){},Ehzk:function(t,e){},G9XZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),a=n("B7ZF"),c={name:"Article",data:function(){return{contents:"",emoj:":smile: "}},props:{content:{type:Object,default:function(){return{}}}},methods:{}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"article"},[n("div",{staticClass:"label"},[n("span",{staticClass:"iconfont balel-icon"},[t._v("")]),t._v(" "),n("span",{staticClass:"label-text"},[t._v(t._s(t.content.category))])]),t._v(" "),n("h2",{staticClass:"title"},[t._v(t._s(t.content.title))]),t._v(" "),n("div",{staticClass:"info"},[n("h4",{staticClass:"author"},[t._v(t._s(t.content.author))]),t._v(" "),n("div",{staticClass:"banner-info"},[n("p",{staticClass:"date"},[t._v("2019-10-12")]),t._v(" "),n("p",{staticClass:"reading"},[n("span",{staticClass:"text"},[t._v("阅读")]),t._v(" "),n("span",{attrs:{clsss:"num"}},[t._v(t._s(t.content.view_count))])]),t._v(" "),n("p",{staticClass:"comment"},[n("span",{staticClass:"text"},[t._v("评论")]),t._v(" "),n("span",{staticClass:"num"},[t._v(t._s(t.content.comment_count))])]),t._v(" "),n("p",{staticClass:"like"},[n("span",{staticClass:"text"},[t._v("喜欢")]),t._v(" "),n("span",{staticClass:"num"},[t._v(t._s(t.content.like_count))])])])]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var r=n("VU/8")(c,o,!1,function(t){n("Ehzk")},"data-v-0c6328c6",null).exports,l=n("NYxO"),m=n("6PdC"),u=n("zL8q"),d=n("yzdk"),v=n("oAV5"),f={name:"Comment",data:function(){return{comment:"",commentList:[],myself:"myself"}},computed:i()({},Object(l.c)(["username"])),filters:{dateFilter:d.a},methods:{cancelComment:function(){this.comment=""},confirmComment:function(){var t=this,e=this.username,n=this.$route.params.id,s=this.comment,i={username:e,id:n,comment:s,created_at:Object(v.b)()};if(!this.username)return Object(u.Message)({message:"请登录后再发表评论",type:"error"}),void this.$router.push({name:"Login"});m.c.checkUsername(e)&&m.b.checkId(n)&&m.b.checkComment(s)&&this.postAxios("v1/blog/comment/add",{username:e,blogId:n,comment:s}).then(function(e){Object(u.Message)({message:e.data.message,type:"success"}),t.commentList.unshift(i),t.comment=""})},getComment:function(){var t=this,e=this.$route.params.id;m.b.checkId(e)&&this.getAxios("v1/blog/comment/"+e).then(function(e){t.commentList=e.data})},deleteComment:function(t){var e=this,n=t,s=this.username;m.c.checkUsername(s)&&m.b.checkId(n)&&this.postAxios("v1/blog/comment/delete",{username:s,id:n}).then(function(t){var s=e.commentList.filter(function(t){return t.id!==n});e.commentList=s})}},created:function(){this.getComment()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"comment"},[n("div",{staticClass:"input-wrap"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"text",attrs:{placeholder:"写下你的评论"},domProps:{value:t.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.confirmComment(e):null},input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),n("div",{staticClass:"text-info"},[n("p",{staticClass:"left"},[t._v("ctrl+enter 发表评论")]),t._v(" "),n("p",{staticClass:"right"},[n("span",{staticClass:"cancel",on:{click:t.cancelComment}},[t._v("取消")]),t._v(" "),n("span",{staticClass:"confirm",on:{click:t.confirmComment}},[t._v("确定")])])])]),t._v(" "),n("div",{staticClass:"comment-list"},[n("h3",[t._v("评论")]),t._v(" "),t.commentList.length>0?n("ul",{staticClass:"list"},t._l(t.commentList,function(e){return n("li",{key:e.id,staticClass:"item"},[n("p",{staticClass:"name",class:[e.username===t.username?"myself":null]},[t._v(t._s(e.username))]),t._v(" "),n("p",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e.created_at)))]),t._v(" "),n("p",{staticClass:"comme"},[t._v(t._s(e.comment))]),t._v(" "),e.username===t.username?n("span",{staticClass:"delete",on:{click:function(n){return t.deleteComment(e.id)}}},[t._v("\n          删除\n        ")]):t._e()])}),0):n("p",{staticClass:"no-comment"},[t._v("暂无评论")])])])},staticRenderFns:[]};var _=n("VU/8")(f,h,!1,function(t){n("YTIy")},"data-v-f20bfa8e",null).exports,p={name:"Btn",data:function(){return{isActive:!1,activeTop:"scroll-top-active",isLike:!1}},props:{likeStatus:Boolean},computed:i()({},Object(l.c)(["username"])),watch:{likeStatus:function(t){this.isLike=this.likeStatus}},methods:{getLikeOrNot:function(){var t=this,e=this.$route.params.id;this.username?m.b.checkId(e)&&(this.isLike||this.postAxios("v1/blog/like",{blogId:e}).then(function(e){t.isLike=!0}),this.isLike&&this.postAxios("v1/blog/like/cancel",{blogId:e}).then(function(e){t.isLike=!1})):Object(u.Message)({message:"您还没有登录，无法执行相关操作",type:"error"})},getScroll:function(){var t=this._getScrollTop();this.isActive=t>0},backToTop:function(){var t=document.documentElement||document.body,e=this._getScrollTop(),n=setInterval(function(){0===t.scrollTop?clearInterval(n):t.scrollTop-=e/66},3)},_getScrollTop:function(){return(document.documentElement||document.body).scrollTop}},created:function(){window.addEventListener("scroll",Object(v.c)(this.getScroll))},deactivated:function(){window.removeEventListener("scroll",Object(v.c)(this.getScroll))}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"btn"},[n("ul",{staticClass:"container"},[n("li",{staticClass:"item scroll-top",class:[t.isActive?t.activeTop:""],on:{click:t.backToTop}},[n("span",{staticClass:"iconfont common"},[t._v("")])]),t._v(" "),n("li",{staticClass:"item",on:{click:t.getLikeOrNot}},[t.isLike?n("span",{staticClass:"iconfont common like"},[t._v("")]):n("span",{staticClass:"iconfont common"},[t._v("")])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",{staticClass:"iconfont common"},[this._v("")])])}]};var g=n("VU/8")(p,C,!1,function(t){n("C5Lo")},"data-v-2af4cf7c",null).exports,k=n("a6GB"),b={name:"Detail",components:{Header:a.a,Article:r,Comment:_,Btn:g,Loading:k.a},data:function(){return{content:{},isLoading:!0,likeStatus:!1}},computed:i()({},Object(l.c)(["username"])),methods:{getBlogById:function(t){var e=this,n={};n=this.username?{id:t,username:this.username}:{id:t},this.postAxios("v1/blog/detail",n).then(function(t){e.content=t.data,e.isLoading=!1,t.data.like_status&&(e.likeStatus=t.data.like_status)})}},created:function(){this.getBlogById(this.$route.params.id)}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"detail"},[e("section",{staticClass:"header"},[e("Header")],1),this._v(" "),e("section",{staticClass:"content"},[e("Article",{attrs:{content:this.content}}),this._v(" "),e("Loading",{directives:[{name:"show",rawName:"v-show",value:this.isLoading,expression:"isLoading"}]}),this._v(" "),e("Comment")],1),this._v(" "),e("Btn",{attrs:{likeStatus:this.likeStatus}})],1)},staticRenderFns:[]};var y=n("VU/8")(b,L,!1,function(t){n("Y8M5"),n("kY/y")},"data-v-5583373d",null);e.default=y.exports},Y8M5:function(t,e){},YTIy:function(t,e){},"kY/y":function(t,e){},oAV5:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a});var s=function(){var t=[],e=new Date,n=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();return s<10&&(s="0"+s),i<10&&(i="0"+i),t.push(n),t.push(s),t.push(i),t.join("-")},i=function(t){if(t)return t.replace(/\n/g,"\n\n")},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=null;return function(){var s=this,i=arguments;n||(n=setTimeout(function(){t.apply(s,i),n=null},e))}}},yzdk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var s=function(t){return t?t.split("T")[0]:"0000-00-00"}}});
//# sourceMappingURL=2.e44a8b4b3f6bf5955564.js.map