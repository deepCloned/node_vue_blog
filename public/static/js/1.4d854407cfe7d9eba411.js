webpackJsonp([1],{"5zde":function(t,e,s){s("zQR9"),s("qyJz"),t.exports=s("FeBl").Array.from},Ehzk:function(t,e){},G9XZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Dd8w"),i=s.n(n),a=s("B7ZF"),c={name:"Article",data:function(){return{contents:"",emoj:":smile: "}},props:{content:{type:Object,default:function(){return{}}}},methods:{}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"article"},[s("div",{staticClass:"label"},[s("span",{staticClass:"iconfont balel-icon"},[t._v("")]),t._v(" "),s("span",{staticClass:"label-text"},[t._v(t._s(t.content.category))])]),t._v(" "),s("h2",{staticClass:"title"},[t._v(t._s(t.content.title))]),t._v(" "),s("div",{staticClass:"info"},[s("h4",{staticClass:"author"},[t._v(t._s(t.content.author))]),t._v(" "),s("div",{staticClass:"banner-info"},[s("p",{staticClass:"date"},[t._v("2019-10-12")]),t._v(" "),s("p",{staticClass:"reading"},[s("span",{staticClass:"text"},[t._v("阅读")]),t._v(" "),s("span",{attrs:{clsss:"num"}},[t._v(t._s(t.content.view_count))])]),t._v(" "),s("p",{staticClass:"comment"},[s("span",{staticClass:"text"},[t._v("评论")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.content.comment_count))])]),t._v(" "),s("p",{staticClass:"like"},[s("span",{staticClass:"text"},[t._v("喜欢")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.content.like_count))])])])]),t._v(" "),s("div",{staticClass:"content"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var r=s("VU/8")(c,o,!1,function(t){s("Ehzk")},"data-v-0c6328c6",null).exports,l=s("Gu7T"),m=s.n(l),u=s("NYxO"),d=s("6PdC"),v=s("zL8q"),f=s("yzdk"),h=s("oAV5"),_={name:"Comment",data:function(){return{comment:"",commentList:[],myself:"myself"}},computed:i()({},Object(u.c)(["username"])),filters:{dateFilter:f.a},methods:{cancelComment:function(){this.comment=""},confirmComment:function(){var t=this,e=this.username,s=this.$route.params.id,n=this.comment,i={username:e,id:s,comment:n,created_at:Object(h.c)()};if(!this.username)return Object(v.Message)({message:"请登录后再发表评论",type:"error"}),void this.$router.push({name:"Login"});d.c.checkUsername(e)&&d.b.checkId(s)&&d.b.checkComment(n)&&this.postAxios("v1/blog/comment/add",{username:e,blogId:s,comment:n}).then(function(e){Object(v.Message)({message:e.data.message,type:"success"}),t.commentList.unshift(i),t.comment=""})},getComment:function(){var t=this,e=this.$route.params.id;d.b.checkId(e)&&this.getAxios("v1/blog/comment/"+e).then(function(e){t.commentList=e.data})},deleteComment:function(t){var e=this,s=t,n=this.username;d.c.checkUsername(n)&&d.b.checkId(s)&&this.postAxios("v1/blog/comment/delete",{username:n,id:s}).then(function(t){var n=[].concat(m()(e.commentList)).filter(function(t){return t.id!==s});e.commentList=n})}},created:function(){this.getComment()}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"comment"},[s("div",{staticClass:"input-wrap"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"text",attrs:{placeholder:"写下你的评论"},domProps:{value:t.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.confirmComment(e):null},input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),s("div",{staticClass:"text-info"},[s("p",{staticClass:"left"},[t._v("ctrl+enter 发表评论")]),t._v(" "),s("p",{staticClass:"right"},[s("span",{staticClass:"cancel",on:{click:t.cancelComment}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"confirm",on:{click:t.confirmComment}},[t._v("确定")])])])]),t._v(" "),s("div",{staticClass:"comment-list"},[s("h3",[t._v("评论")]),t._v(" "),t.commentList.length>0?s("ul",{staticClass:"list"},[s("transition-group",{attrs:{duration:500,"enter-active-class":"aniamted fadeIn","leave-active-class":"animated fadeOut"}},t._l(t.commentList,function(e){return s("li",{key:e.id,staticClass:"item"},[s("p",{staticClass:"name",class:[e.username===t.username?"myself":null]},[t._v(t._s(e.username))]),t._v(" "),s("p",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e.created_at)))]),t._v(" "),s("p",{staticClass:"comme"},[t._v(t._s(e.comment))]),t._v(" "),e.username===t.username?s("span",{staticClass:"delete",on:{click:function(s){return t.deleteComment(e.id)}}},[t._v("\n            删除\n          ")]):t._e()])}),0)],1):s("p",{staticClass:"no-comment"},[t._v("暂无评论")])])])},staticRenderFns:[]};var C=s("VU/8")(_,p,!1,function(t){s("aYsp")},"data-v-546c19bc",null).exports,k={name:"Btn",data:function(){return{isActive:!1,activeTop:"scroll-top-active",isLike:!1}},props:{likeStatus:Boolean},computed:i()({},Object(u.c)(["username"])),watch:{likeStatus:function(t){this.isLike=this.likeStatus}},methods:{getLikeOrNot:function(){var t=this,e=!1;if(!e){var s=this.$route.params.id;if(!this.username)return void this.$message({message:"您还没有登录，无法执行相关操作",type:"error"});d.b.checkId(s)&&(this.isLike||(e=!0,this.postAxios("v1/blog/like",{id:s}).then(function(s){t.isLike=!0,e=!1})),this.isLike&&(e=!0,this.postAxios("v1/blog/like/cancel",{id:s}).then(function(s){t.isLike=!1,e=!1})))}},throttledLikeOrNot:Object(h.d)(function(){this.getLikeOrNot()},500),getScroll:function(){var t=this._getScrollTop();this.isActive=t>0},backToTop:function(){var t=document.documentElement||document.body,e=this._getScrollTop(),s=setInterval(function(){0===t.scrollTop?clearInterval(s):t.scrollTop-=e/66},3)},_getScrollTop:function(){return(document.documentElement||document.body).scrollTop}},created:function(){window.addEventListener("scroll",Object(h.d)(this.getScroll,100))},deactivated:function(){window.removeEventListener("scroll",Object(h.d)(this.getScroll,100))}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"btn"},[s("ul",{staticClass:"container"},[s("li",{staticClass:"item scroll-top",class:[t.isActive?t.activeTop:""],on:{click:t.backToTop}},[s("span",{staticClass:"iconfont common"},[t._v("")])]),t._v(" "),s("li",{staticClass:"item",on:{click:t.throttledLikeOrNot}},[t.isLike?s("span",{staticClass:"iconfont common like"},[t._v("")]):s("span",{staticClass:"iconfont common"},[t._v("")])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",{staticClass:"iconfont common"},[this._v("")])])}]};var y=s("VU/8")(k,g,!1,function(t){s("QnjJ")},"data-v-4938ff9e",null).exports,b=s("a6GB"),L={name:"Detail",components:{Header:a.a,Article:r,Comment:C,Btn:y,Loading:b.a},data:function(){return{content:{},isLoading:!0,likeStatus:!1}},computed:i()({},Object(u.c)(["username"])),methods:{getBlogById:function(t){var e=this,s={};s=this.username?{id:t,username:this.username}:{id:t},this.postAxios("v1/blog/detail",s).then(function(t){e.content=t.data,e.isLoading=!1,t.data.like_status&&(e.likeStatus=t.data.like_status)})}},created:function(){this.getBlogById(this.$route.params.id)}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"detail"},[e("section",{staticClass:"header"},[e("Header")],1),this._v(" "),e("section",{staticClass:"content"},[e("Article",{attrs:{content:this.content}}),this._v(" "),e("Loading",{directives:[{name:"show",rawName:"v-show",value:this.isLoading,expression:"isLoading"}]}),this._v(" "),e("Comment")],1),this._v(" "),e("Btn",{attrs:{likeStatus:this.likeStatus}})],1)},staticRenderFns:[]};var A=s("VU/8")(L,x,!1,function(t){s("Y8M5"),s("kY/y")},"data-v-5583373d",null);e.default=A.exports},Gu7T:function(t,e,s){"use strict";e.__esModule=!0;var n,i=s("c/Tr"),a=(n=i)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return(0,a.default)(t)}},QnjJ:function(t,e){},Y8M5:function(t,e){},aYsp:function(t,e){},"c/Tr":function(t,e,s){t.exports={default:s("5zde"),__esModule:!0}},fBQ2:function(t,e,s){"use strict";var n=s("evD5"),i=s("X8DO");t.exports=function(t,e,s){e in t?n.f(t,e,i(0,s)):t[e]=s}},"kY/y":function(t,e){},qyJz:function(t,e,s){"use strict";var n=s("+ZMJ"),i=s("kM2E"),a=s("sB3e"),c=s("msXi"),o=s("Mhyx"),r=s("QRG4"),l=s("fBQ2"),m=s("3fs2");i(i.S+i.F*!s("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,s,i,u,d=a(t),v="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,_=void 0!==h,p=0,C=m(d);if(_&&(h=n(h,f>2?arguments[2]:void 0,2)),void 0==C||v==Array&&o(C))for(s=new v(e=r(d.length));e>p;p++)l(s,p,_?h(d[p],p):d[p]);else for(u=C.call(d),s=new v;!(i=u.next()).done;p++)l(s,p,_?c(u,h,[i.value,p],!0):i.value);return s.length=p,s}})}});
//# sourceMappingURL=1.4d854407cfe7d9eba411.js.map