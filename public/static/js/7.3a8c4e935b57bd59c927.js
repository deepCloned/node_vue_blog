webpackJsonp([7],{TXp8:function(e,a){},vdVF:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=s("Dd8w"),c=s.n(t),n=s("6PdC"),o=s("mtWM"),r=s.n(o),i=s("T452"),d=s("NYxO"),u={name:"Login",data:function(){return{account:"",password:"",accountError:"用户名 / 邮箱不符合规范",passwordError:"密码至少包含数字、字母、符号中的两种",accountChecked:!0,passwordChecked:!0,cancelBlock:!1}},computed:c()({},Object(d.c)(["isLogin","username","token"]),{isChecked:function(){return this.accountChecked&&this.passwordChecked}}),methods:c()({},Object(d.b)(["changeToken","changeUsername","changeLoginState"]),{clearAccountValue:function(){this.account=""},clearPasswordValue:function(){this.password=""},validateAccount:function(){this.accountChecked=n.c.checkUsername(this.account)||n.c.checkEmail(this.account)},validatePassword:function(){this.passwordChecked=n.c.checkPassword(this.password)},getLogin:function(){var e=this,a=n.c.getType(this.account),s=r.a.CancelToken.source();r()({url:i.a.baseUrl+"v1/token",method:"POST",data:{account:this.account,password:this.password,type:a}},{cancelToken:s.token}).then(function(a){e.$message({message:"登录成功",type:"success"});var s=a.data.token,t=a.data.username;localStorage.setItem("username",t),localStorage.setItem("token",s),e.changeToken(s),e.changeUsername(t),e.changeLoginState(!0),e.$router.push({name:"Home"})}).catch(function(a){e.$message({message:a.response.data.message,type:"error"})}),s.cancel()}})},l={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"login"},[s("header",[e._v("欢迎登录")]),e._v(" "),s("ul",{staticClass:"input-box"},[s("li",{staticClass:"item username"},[s("span",{staticClass:"iconfont"},[e._v("")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text",placeholder:"请输入用户名 / 邮箱"},domProps:{value:e.account},on:{change:e.validateAccount,input:function(a){a.target.composing||(e.account=a.target.value)}}}),e._v(" "),s("transition",{attrs:{duration:500,"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.account.length>0,expression:"account.length > 0"}],staticClass:"iconfont cancel",on:{click:e.clearAccountValue}},[e._v("\n          \n        ")])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.accountChecked,expression:"!accountChecked"}],staticClass:"error-message"},[e._v(e._s(e.accountError))])],1),e._v(" "),s("li",{staticClass:"item password"},[s("span",{staticClass:"iconfont"},[e._v("")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{change:e.validatePassword,input:function(a){a.target.composing||(e.password=a.target.value)}}}),e._v(" "),s("transition",{attrs:{duration:500,"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.password.length>0,expression:"password.length > 0"}],staticClass:"iconfont cancel",on:{click:e.clearPasswordValue}},[e._v("\n          \n        ")])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.passwordChecked,expression:"!passwordChecked"}],staticClass:"error-message"},[e._v(e._s(e.passwordError))])],1)]),e._v(" "),s("div",{staticClass:"submit",on:{click:e.getLogin}},[e._v("登录")])])},staticRenderFns:[]};var v=s("VU/8")(u,l,!1,function(e){s("TXp8")},"data-v-003c1980",null);a.default=v.exports}});
//# sourceMappingURL=7.3a8c4e935b57bd59c927.js.map